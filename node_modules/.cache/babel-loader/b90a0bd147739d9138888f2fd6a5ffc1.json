{"ast":null,"code":"var _jsxFileName = \"/home/prachi/workspace/LinkedIn-Clone/LinkedIn-Clone-React/linkedin_react/src/components/Feed/Feed.js\";\nimport \"./Feed.css\";\nimport InputOption from \"./InputOption\";\nimport Post from \"./Post\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport SubscriptionsIcon from \"@material-ui/icons/Subscriptions\";\nimport EventNoteIcon from \"@material-ui/icons/EventNote\";\nimport CalendarViewDayIcon from \"@material-ui/icons/CalendarViewDay\";\nimport FlipMove from \"react-flip-move\";\nimport { Link } from \"react-router-dom\";\nimport React, { Component } from \"react\";\nimport { withCookies } from \"react-cookie\";\nimport CreatePost from \"./CreatePost\";\nimport { trackPromise } from \"react-promise-tracker\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Feed extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updatePost = () => {\n      console.log(\"update\");\n      this.setState({\n        update: !this.state.update\n      });\n    };\n\n    this.submitPost = () => {\n      var form_data = new FormData();\n      form_data.set(\"body\", this.state.body);\n\n      if (this.state.image) {\n        form_data.set(\"image\", this.state.imageAsFile, this.state.imageAsFile.name);\n      }\n\n      fetch(`${process.env.REACT_APP_API_URL}/papi/create_post/`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Token ${this.props.cookies.get(\"auth-token\").token}`\n        },\n        body: form_data\n      }).then(res => res.json()).then(res => {\n        this.setState({\n          modalPost: false\n        }, function () {\n          window.location.reload();\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.createPost = () => {\n      this.setState({\n        modalPost: true\n      });\n    };\n\n    this.handleBody = e => this.setState({\n      body: e.target.value\n    });\n\n    this.state = {\n      input: \"\",\n      posts: [],\n      modalPost: false,\n      body: \"\",\n      image: \"\",\n      imageAsFile: null,\n      update: false\n    };\n  }\n\n  componentDidMount() {\n    trackPromise(fetch(`${process.env.REACT_APP_API_URL}/papi/posts/`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Token ${this.props.cookies.get(\"auth-token\").token}`\n      }\n    }).then(resp => resp.json()).then(res => this.setState({\n      posts: res\n    }))).catch(error => console.log(error));\n    this.updatePost();\n  } // to display post instantly w/o refreshing after\n  // creating the post.\n\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.posts.length !== this.state.posts.length || prevState.update !== this.state.update) {\n      trackPromise(fetch(`${process.env.REACT_APP_API_URL}/papi/posts/`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${this.props.cookies.get(\"auth-token\").token}`\n        }\n      })).then(resp => resp.json()).then(res => this.setState({\n        posts: res\n      })).catch(error => console.log(error));\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feed\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feed__inputContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            width: \"100%\"\n          },\n          onClick: this.createPost,\n          className: \"feed__input\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Start a Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feed__inputOptions\",\n          children: [/*#__PURE__*/_jsxDEV(InputOption, {\n            Icon: ImageIcon,\n            title: \"Photo\",\n            color: \"#70B5F9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InputOption, {\n            Icon: SubscriptionsIcon,\n            title: \"Video\",\n            color: \"#7FC15E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InputOption, {\n            Icon: EventNoteIcon,\n            title: \"Event\",\n            color: \"#E7A33E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InputOption, {\n            Icon: CalendarViewDayIcon,\n            title: \"Write article\",\n            color: \"#F5987E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FlipMove, {\n        children: this.state.posts.length > 0 && this.state.posts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n          post: post,\n          updatePost: this.updatePost\n        }, post.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), this.state.modalPost ? /*#__PURE__*/_jsxDEV(Link, {\n        to: true,\n        component: () => /*#__PURE__*/_jsxDEV(CreatePost, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 37\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withCookies(Feed);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/prachi/workspace/LinkedIn-Clone/LinkedIn-Clone-React/linkedin_react/src/components/Feed/Feed.js"],"names":["InputOption","Post","ImageIcon","SubscriptionsIcon","EventNoteIcon","CalendarViewDayIcon","FlipMove","Link","React","Component","withCookies","CreatePost","trackPromise","Feed","constructor","props","updatePost","console","log","setState","update","state","submitPost","form_data","FormData","set","body","image","imageAsFile","name","fetch","process","env","REACT_APP_API_URL","method","headers","Authorization","cookies","get","token","then","res","json","modalPost","window","location","reload","catch","err","createPost","handleBody","e","target","value","input","posts","componentDidMount","resp","error","componentDidUpdate","prevProps","prevState","length","render","width","map","post","id"],"mappings":";AAAA,OAAO,YAAP;AACA,OAAOA,WAAP,MAAwB,eAAxB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,OAAOC,mBAAP,MAAgC,oCAAhC;AACA,OAAOC,QAAP,MAAqB,iBAArB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,YAAT,QAA6B,uBAA7B;;;AAEA,MAAMC,IAAN,SAAmBJ,SAAnB,CAA6B;AAC3BK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAcnBC,UAdmB,GAcN,MAAM;AACjBC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,WAAKC,QAAL,CAAc;AAAEC,QAAAA,MAAM,EAAE,CAAC,KAAKC,KAAL,CAAWD;AAAtB,OAAd;AACD,KAjBkB;;AAAA,SAkBnBE,UAlBmB,GAkBN,MAAM;AACjB,UAAIC,SAAS,GAAG,IAAIC,QAAJ,EAAhB;AAEAD,MAAAA,SAAS,CAACE,GAAV,CAAc,MAAd,EAAsB,KAAKJ,KAAL,CAAWK,IAAjC;;AACA,UAAI,KAAKL,KAAL,CAAWM,KAAf,EAAsB;AACpBJ,QAAAA,SAAS,CAACE,GAAV,CACE,OADF,EAEE,KAAKJ,KAAL,CAAWO,WAFb,EAGE,KAAKP,KAAL,CAAWO,WAAX,CAAuBC,IAHzB;AAKD;;AAEDC,MAAAA,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,oBAAlC,EAAuD;AAC1DC,QAAAA,MAAM,EAAE,MADkD;AAE1DC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,SAAQ,KAAKrB,KAAL,CAAWsB,OAAX,CAAmBC,GAAnB,CAAuB,YAAvB,EAAqCC,KAAM;AAD5D,SAFiD;AAK1Db,QAAAA,IAAI,EAAEH;AALoD,OAAvD,CAAL,CAOGiB,IAPH,CAOSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAPjB,EAQGF,IARH,CAQSC,GAAD,IAAS;AACb,aAAKtB,QAAL,CAAc;AAAEwB,UAAAA,SAAS,EAAE;AAAb,SAAd,EAAoC,YAAY;AAC9CC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,SAFD;AAGD,OAZH,EAaGC,KAbH,CAaUC,GAAD,IAAS/B,OAAO,CAACC,GAAR,CAAY8B,GAAZ,CAblB;AAcD,KA5CkB;;AAAA,SA8CnBC,UA9CmB,GA8CN,MAAM;AACjB,WAAK9B,QAAL,CAAc;AACZwB,QAAAA,SAAS,EAAE;AADC,OAAd;AAGD,KAlDkB;;AAAA,SAoDnBO,UApDmB,GAoDLC,CAAD,IAAO,KAAKhC,QAAL,CAAc;AAAEO,MAAAA,IAAI,EAAEyB,CAAC,CAACC,MAAF,CAASC;AAAjB,KAAd,CApDD;;AAGjB,SAAKhC,KAAL,GAAa;AACXiC,MAAAA,KAAK,EAAE,EADI;AAEXC,MAAAA,KAAK,EAAE,EAFI;AAGXZ,MAAAA,SAAS,EAAE,KAHA;AAIXjB,MAAAA,IAAI,EAAE,EAJK;AAKXC,MAAAA,KAAK,EAAE,EALI;AAMXC,MAAAA,WAAW,EAAE,IANF;AAOXR,MAAAA,MAAM,EAAE;AAPG,KAAb;AASD;;AA0CDoC,EAAAA,iBAAiB,GAAG;AAClB5C,IAAAA,YAAY,CACVkB,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,cAAlC,EAAiD;AACpDC,MAAAA,MAAM,EAAE,KAD4C;AAEpDC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAG,SAAQ,KAAKrB,KAAL,CAAWsB,OAAX,CAAmBC,GAAnB,CAAuB,YAAvB,EAAqCC,KAAM;AAF5D;AAF2C,KAAjD,CAAL,CAOGC,IAPH,CAOSiB,IAAD,IAAUA,IAAI,CAACf,IAAL,EAPlB,EAQGF,IARH,CAQSC,GAAD,IACJ,KAAKtB,QAAL,CAAc;AACZoC,MAAAA,KAAK,EAAEd;AADK,KAAd,CATJ,CADU,CAAZ,CAcEM,KAdF,CAcSW,KAAD,IAAWzC,OAAO,CAACC,GAAR,CAAYwC,KAAZ,CAdnB;AAeA,SAAK1C,UAAL;AACD,GAxE0B,CAyE3B;AACA;;;AACA2C,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACvC,QACEA,SAAS,CAACN,KAAV,CAAgBO,MAAhB,KAA2B,KAAKzC,KAAL,CAAWkC,KAAX,CAAiBO,MAA5C,IACAD,SAAS,CAACzC,MAAV,KAAqB,KAAKC,KAAL,CAAWD,MAFlC,EAGE;AACAR,MAAAA,YAAY,CACVkB,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,cAAlC,EAAiD;AACpDC,QAAAA,MAAM,EAAE,KAD4C;AAEpDC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,SACd,KAAKrB,KAAL,CAAWsB,OAAX,CAAmBC,GAAnB,CAAuB,YAAvB,EAAqCC,KACtC;AAJM;AAF2C,OAAjD,CADK,CAAZ,CAWGC,IAXH,CAWSiB,IAAD,IAAUA,IAAI,CAACf,IAAL,EAXlB,EAYGF,IAZH,CAYSC,GAAD,IACJ,KAAKtB,QAAL,CAAc;AACZoC,QAAAA,KAAK,EAAEd;AADK,OAAd,CAbJ,EAiBGM,KAjBH,CAiBUW,KAAD,IAAWzC,OAAO,CAACC,GAAR,CAAYwC,KAAZ,CAjBpB;AAkBD;AACF;;AAEDK,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA,gCACE;AACE,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE;AAAT,WADT;AAEE,UAAA,OAAO,EAAE,KAAKf,UAFhB;AAGE,UAAA,SAAS,EAAC,aAHZ;AAAA,iCAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,gBADF,eASE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACE,QAAC,WAAD;AAAa,YAAA,IAAI,EAAE/C,SAAnB;AAA8B,YAAA,KAAK,EAAC,OAApC;AAA4C,YAAA,KAAK,EAAC;AAAlD;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,WAAD;AACE,YAAA,IAAI,EAAEC,iBADR;AAEE,YAAA,KAAK,EAAC,OAFR;AAGE,YAAA,KAAK,EAAC;AAHR;AAAA;AAAA;AAAA;AAAA,kBAFF,eAOE,QAAC,WAAD;AAAa,YAAA,IAAI,EAAEC,aAAnB;AAAkC,YAAA,KAAK,EAAC,OAAxC;AAAgD,YAAA,KAAK,EAAC;AAAtD;AAAA;AAAA;AAAA;AAAA,kBAPF,eAQE,QAAC,WAAD;AACE,YAAA,IAAI,EAAEC,mBADR;AAEE,YAAA,KAAK,EAAC,eAFR;AAGE,YAAA,KAAK,EAAC;AAHR;AAAA;AAAA;AAAA;AAAA,kBARF;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAyBE;AAAA;AAAA;AAAA;AAAA,cAzBF,eA4BE,QAAC,QAAD;AAAA,kBACG,KAAKgB,KAAL,CAAWkC,KAAX,CAAiBO,MAAjB,GAA0B,CAA1B,IACC,KAAKzC,KAAL,CAAWkC,KAAX,CAAiBU,GAAjB,CAAsBC,IAAD,iBACnB,QAAC,IAAD;AAAoB,UAAA,IAAI,EAAEA,IAA1B;AAAgC,UAAA,UAAU,EAAE,KAAKlD;AAAjD,WAAWkD,IAAI,CAACC,EAAhB;AAAA;AAAA;AAAA;AAAA,gBADF;AAFJ;AAAA;AAAA;AAAA;AAAA,cA5BF,EAmCG,KAAK9C,KAAL,CAAWsB,SAAX,gBACC,QAAC,IAAD;AAAM,QAAA,EAAE,MAAR;AAAS,QAAA,SAAS,EAAE,mBAAM,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAA1B;AAAA;AAAA;AAAA;AAAA,cADD,GAEG,IArCN;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAyCD;;AA/I0B;;AAkJ7B,oBAAejC,WAAW,CAACG,IAAD,CAA1B","sourcesContent":["import \"./Feed.css\";\nimport InputOption from \"./InputOption\";\nimport Post from \"./Post\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport SubscriptionsIcon from \"@material-ui/icons/Subscriptions\";\nimport EventNoteIcon from \"@material-ui/icons/EventNote\";\nimport CalendarViewDayIcon from \"@material-ui/icons/CalendarViewDay\";\nimport FlipMove from \"react-flip-move\";\nimport { Link } from \"react-router-dom\";\nimport React, { Component } from \"react\";\nimport { withCookies } from \"react-cookie\";\nimport CreatePost from \"./CreatePost\";\nimport { trackPromise } from \"react-promise-tracker\";\n\nclass Feed extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      input: \"\",\n      posts: [],\n      modalPost: false,\n      body: \"\",\n      image: \"\",\n      imageAsFile: null,\n      update: false,\n    };\n  }\n\n  updatePost = () => {\n    console.log(\"update\");\n    this.setState({ update: !this.state.update });\n  };\n  submitPost = () => {\n    var form_data = new FormData();\n\n    form_data.set(\"body\", this.state.body);\n    if (this.state.image) {\n      form_data.set(\n        \"image\",\n        this.state.imageAsFile,\n        this.state.imageAsFile.name\n      );\n    }\n\n    fetch(`${process.env.REACT_APP_API_URL}/papi/create_post/`, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Token ${this.props.cookies.get(\"auth-token\").token}`,\n      },\n      body: form_data,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        this.setState({ modalPost: false }, function () {\n          window.location.reload();\n        });\n      })\n      .catch((err) => console.log(err));\n  };\n\n  createPost = () => {\n    this.setState({\n      modalPost: true,\n    });\n  };\n\n  handleBody = (e) => this.setState({ body: e.target.value });\n\n  componentDidMount() {\n    trackPromise(\n      fetch(`${process.env.REACT_APP_API_URL}/papi/posts/`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${this.props.cookies.get(\"auth-token\").token}`,\n        },\n      })\n        .then((resp) => resp.json())\n        .then((res) =>\n          this.setState({\n            posts: res,\n          })\n        )\n    ).catch((error) => console.log(error));\n    this.updatePost();\n  }\n  // to display post instantly w/o refreshing after\n  // creating the post.\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      prevState.posts.length !== this.state.posts.length ||\n      prevState.update !== this.state.update\n    ) {\n      trackPromise(\n        fetch(`${process.env.REACT_APP_API_URL}/papi/posts/`, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Token ${\n              this.props.cookies.get(\"auth-token\").token\n            }`,\n          },\n        })\n      )\n        .then((resp) => resp.json())\n        .then((res) =>\n          this.setState({\n            posts: res,\n          })\n        )\n        .catch((error) => console.log(error));\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"feed\">\n        <div className=\"feed__inputContainer\">\n          <button\n            style={{ width: \"100%\" }}\n            onClick={this.createPost}\n            className=\"feed__input\"\n          >\n            <span>Start a Post</span>\n          </button>\n          {/* </div> */}\n          <div className=\"feed__inputOptions\">\n            <InputOption Icon={ImageIcon} title=\"Photo\" color=\"#70B5F9\" />\n            <InputOption\n              Icon={SubscriptionsIcon}\n              title=\"Video\"\n              color=\"#7FC15E\"\n            />\n            <InputOption Icon={EventNoteIcon} title=\"Event\" color=\"#E7A33E\" />\n            <InputOption\n              Icon={CalendarViewDayIcon}\n              title=\"Write article\"\n              color=\"#F5987E\"\n            />\n          </div>\n        </div>\n        <hr />\n\n        {/* Posts */}\n        <FlipMove>\n          {this.state.posts.length > 0 &&\n            this.state.posts.map((post) => (\n              <Post key={post.id} post={post} updatePost={this.updatePost} />\n            ))}\n        </FlipMove>\n\n        {this.state.modalPost ? (\n          <Link to component={() => <CreatePost />} />\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default withCookies(Feed);\n"]},"metadata":{},"sourceType":"module"}