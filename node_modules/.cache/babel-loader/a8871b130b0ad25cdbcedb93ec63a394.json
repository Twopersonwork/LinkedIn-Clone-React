{"ast":null,"code":"var _jsxFileName = \"/home/prachi/workspace/LinkedIn-Clone/LinkedIn-Clone-React/linkedin_react/src/components/Feed/CreatePost.js\";\nimport React, { Component } from \"react\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport { withCookies } from \"react-cookie\";\nimport InsertPhotoIcon from \"@material-ui/icons/InsertPhoto\";\nimport \"./CreatePost.css\";\nimport { Avatar } from \"@material-ui/core\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { AiFillCloseCircle } from \"react-icons/ai\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class CreatePost extends Component {\n  constructor(props) {\n    super(props);\n\n    this.removeImage = () => {\n      console.log(\"clicked\");\n      this.setState({\n        image: \"\",\n        imageAsFile: null\n      });\n    };\n\n    this.handleBody = e => this.setState({\n      body: e.target.value\n    }, function () {\n      console.log(this.state.body);\n    });\n\n    this.submitPost = () => {\n      var form_data = new FormData();\n      form_data.set(\"body\", this.state.body);\n\n      if (this.state.imageAsFile) {\n        form_data.set(\"image\", this.state.imageAsFile, this.state.imageAsFile.name);\n      }\n\n      console.log(this.props.cookies.get(\"auth-token\").token);\n      fetch(`${process.env.REACT_APP_API_URL}/papi/create_post/`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Token ${this.props.cookies.get(\"auth-token\").token}`\n        },\n        body: form_data\n      }).then(res => res.json()).then(res => {\n        this.setState({\n          modalPost: false\n        }, function () {\n          window.location.reload();\n          this.props.closemodalPost(false);\n        });\n        console.log(res.data);\n      }).catch(err => console.log(err));\n    };\n\n    console.log(\"caallledd\");\n    this.state = {\n      modalPost: true,\n      body: \"\",\n      image: \"\",\n      imageAsFile: null\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        style: {\n          height: \"700px\"\n        },\n        scrollable: true,\n        show: this.state.modalPost,\n        size: \"md\",\n        \"aria-labelledby\": \"contained-modal-title-vcenter\",\n        centered: true,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          autoFocus: true,\n          onClick: () => this.setState({\n            modalPost: false\n          }),\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            style: {\n              fontSize: \"1.2rem\"\n            },\n            id: \"contained-modal-title-vcenter\",\n            children: \"Create a Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"exampleForm.ControlTextarea1\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"post__header\",\n                children: [this.props.cookies.get(\"auth-token\").user.profile_pic ? /*#__PURE__*/_jsxDEV(Avatar, {\n                  src: this.props.cookies.get(\"auth-token\").user.profile_pic,\n                  alt: \"Profile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n                  className: \"post__image\",\n                  src: \"/images/user.svg\",\n                  alt: \"Profile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2\",\n                  style: {\n                    fontWeight: \"bold\"\n                  },\n                  children: this.props.cookies.get(\"auth-token\").user.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              value: this.props.post.body,\n              style: {\n                border: \"none\"\n              },\n              placeholder: \"What do you want to talk about?\",\n              onChange: this.handleBody,\n              as: \"textarea\",\n              rows: 3\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), this.state.image ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"img_wrp\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"post__image\",\n                style: {\n                  borderRadius: \"10px\"\n                },\n                src: this.state.image\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(AiFillCloseCircle, {\n                className: \"close__image\",\n                onClick: this.removeImage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this) : null, this.state.imageEdit ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"img_wrp\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"post__image\",\n                style: {\n                  borderRadius: \"10px\"\n                },\n                src: this.state.imageEdit\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(AiFillCloseCircle, {\n                className: \"close__image\",\n                onClick: this.removeImage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              display: \"none\"\n            },\n            type: \"file\",\n            id: \"file\",\n            onChange: e => this.setState({\n              image: URL.createObjectURL(e.target.files[0]),\n              imageAsFile: e.target.files[0]\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"mr-auto\",\n            htmlFor: \"file\",\n            children: /*#__PURE__*/_jsxDEV(InsertPhotoIcon, {\n              style: {\n                color: \"gray\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            style: post_button,\n            disabled: this.state.body.length < 1,\n            type: \"submit\",\n            onClick: this.submitPost,\n            children: \"Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nconst post_button = {\n  paddingLeft: \"20px\",\n  paddingRight: \"20px\",\n  marginTop: \"10px\",\n  marginLeft: \"10px\",\n  fontWeight: \"bold\",\n  borderRadius: \"50px\",\n  display: \"flex\",\n  background: \"#0c66c2\",\n  color: \"white\",\n  border: \"solid 1px #0c66c2\"\n};\nexport default _c = withCookies(CreatePost);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/prachi/workspace/LinkedIn-Clone/LinkedIn-Clone-React/linkedin_react/src/components/Feed/CreatePost.js"],"names":["React","Component","Modal","Button","Form","withCookies","InsertPhotoIcon","Avatar","CloseIcon","AiFillCloseCircle","CreatePost","constructor","props","removeImage","console","log","setState","image","imageAsFile","handleBody","e","body","target","value","state","submitPost","form_data","FormData","set","name","cookies","get","token","fetch","process","env","REACT_APP_API_URL","method","headers","Authorization","then","res","json","modalPost","window","location","reload","closemodalPost","data","catch","err","render","height","fontSize","user","profile_pic","fontWeight","username","post","border","borderRadius","imageEdit","display","URL","createObjectURL","files","color","post_button","length","paddingLeft","paddingRight","marginTop","marginLeft","background"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport { withCookies } from \"react-cookie\";\nimport InsertPhotoIcon from \"@material-ui/icons/InsertPhoto\";\nimport \"./CreatePost.css\";\nimport { Avatar } from \"@material-ui/core\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { AiFillCloseCircle } from \"react-icons/ai\";\nexport class CreatePost extends Component {\n  constructor(props) {\n    super(props);\n    console.log(\"caallledd\");\n    this.state = {\n      modalPost: true,\n      body: \"\",\n      image: \"\",\n      imageAsFile: null,\n    };\n  }\n  removeImage = () => {\n    console.log(\"clicked\");\n    this.setState({\n      image: \"\",\n      imageAsFile: null,\n    });\n  };\n\n  handleBody = (e) =>\n    this.setState({ body: e.target.value }, function () {\n      console.log(this.state.body);\n    });\n\n  submitPost = () => {\n    var form_data = new FormData();\n\n    form_data.set(\"body\", this.state.body);\n    if (this.state.imageAsFile) {\n      form_data.set(\n        \"image\",\n        this.state.imageAsFile,\n        this.state.imageAsFile.name\n      );\n    }\n\n    console.log(this.props.cookies.get(\"auth-token\").token);\n    fetch(`${process.env.REACT_APP_API_URL}/papi/create_post/`, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Token ${this.props.cookies.get(\"auth-token\").token}`,\n      },\n      body: form_data,\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        this.setState({ modalPost: false }, function () {\n          window.location.reload();\n          this.props.closemodalPost(false);\n        });\n\n        console.log(res.data);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  render() {\n    return (\n      <div>\n        <Modal\n          style={{\n            height: \"700px\",\n          }}\n          scrollable={true}\n          show={this.state.modalPost}\n          size=\"md\"\n          aria-labelledby=\"contained-modal-title-vcenter\"\n          centered\n        >\n          <Modal.Header\n            closeButton\n            autoFocus\n            onClick={() => this.setState({ modalPost: false })}\n          >\n            <Modal.Title\n              style={{\n                fontSize: \"1.2rem\",\n              }}\n              id=\"contained-modal-title-vcenter\"\n            >\n              Create a Post\n            </Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <Form.Group controlId=\"exampleForm.ControlTextarea1\">\n              <Form.Label>\n                <div className=\"post__header\">\n                  {this.props.cookies.get(\"auth-token\").user.profile_pic ? (\n                    <Avatar\n                      src={\n                        this.props.cookies.get(\"auth-token\").user.profile_pic\n                      }\n                      alt=\"Profile\"\n                    />\n                  ) : (\n                    <Avatar\n                      className=\"post__image\"\n                      src=\"/images/user.svg\"\n                      alt=\"Profile\"\n                    />\n                  )}\n                  <span className=\"ml-2\" style={{ fontWeight: \"bold\" }}>\n                    {this.props.cookies.get(\"auth-token\").user.username}\n                  </span>\n                </div>\n              </Form.Label>\n              <Form.Control\n                value={this.props.post.body}\n                style={{ border: \"none\" }}\n                placeholder=\"What do you want to talk about?\"\n                onChange={this.handleBody}\n                as=\"textarea\"\n                rows={3}\n              />\n            </Form.Group>\n\n            {this.state.image ? (\n              <React.Fragment>\n                <div class=\"img_wrp\">\n                  <img\n                    className=\"post__image\"\n                    style={{ borderRadius: \"10px\" }}\n                    src={this.state.image}\n                  />\n                  <AiFillCloseCircle\n                    className=\"close__image\"\n                    onClick={this.removeImage}\n                  />\n                  {/* <Icon  /> */}\n                </div>\n              </React.Fragment>\n            ) : null}\n            {this.state.imageEdit ? (\n              <React.Fragment>\n                <div class=\"img_wrp\">\n                  <img\n                    className=\"post__image\"\n                    style={{ borderRadius: \"10px\" }}\n                    src={this.state.imageEdit}\n                  />\n                  <AiFillCloseCircle\n                    className=\"close__image\"\n                    onClick={this.removeImage}\n                  />\n                  {/* <Icon  /> */}\n                </div>\n              </React.Fragment>\n            ) : null}\n          </Modal.Body>\n          <Modal.Footer>\n            <input\n              style={{ display: \"none\" }}\n              type=\"file\"\n              id=\"file\"\n              onChange={(e) =>\n                this.setState({\n                  image: URL.createObjectURL(e.target.files[0]),\n                  imageAsFile: e.target.files[0],\n                })\n              }\n            />\n            <label className=\"mr-auto\" htmlFor=\"file\">\n              <InsertPhotoIcon style={{ color: \"gray\" }} />\n            </label>\n            <Button\n              style={post_button}\n              disabled={this.state.body.length < 1}\n              type=\"submit\"\n              onClick={this.submitPost}\n            >\n              Post\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nconst post_button = {\n  paddingLeft: \"20px\",\n  paddingRight: \"20px\",\n  marginTop: \"10px\",\n  marginLeft: \"10px\",\n  fontWeight: \"bold\",\n  borderRadius: \"50px\",\n  display: \"flex\",\n  background: \"#0c66c2\",\n  color: \"white\",\n  border: \"solid 1px #0c66c2\",\n};\n\nexport default withCookies(CreatePost);\n"]},"metadata":{},"sourceType":"module"}